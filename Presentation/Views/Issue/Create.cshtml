@using SaleHelder.Application.ViewModels.Issue
@model SaveIssueViewModel

<div class="container mt-5">
    @if (Model.Users.Count == 0 || Model.FaQ.Count == 0)
    {
        <h2>Debes registrar usuarios/preguntas frecuentes</h2>
    }
    else
    {
        <form method="post">
            <table class="table">
                <tr>
                    <td>
                        <label asp-for="@Model.IdUser">Usuario</label>
                        <select asp-for="@Model.IdUser" class="form-control">
                            @foreach (var user in Model.Users)
                            {
                                <option value=@user.Id>@user.UserName</option>
                            }
                        </select>
                        <span asp-validation-for="@Model.IdUser" class="text-danger"></span>
                    </td>
                    <td>
                        <label asp-for="@Model.IdFaq">FaQ</label>
                        <select asp-for="@Model.IdFaq" class="form-control">
                            @foreach (var faq in Model.FaQ.Where(d => d.IdDep == Model.IdUser))
                            {
                                <option value=@faq.id>@faq.question</option>
                            }
                        </select>
                        <span asp-validation-for="@Model.IdFaq" class="text-danger"></span>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <label asp-for="@Model.Problem">Descripción del problema</label>
                        <input asp-for="@Model.Problem" class="form-control" />
                        <span asp-validation-for="@Model.Problem" class="text-danger"></span>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <label asp-for="@Model.Date">Fecha</label>
                        <input asp-for="@Model.Date" type="date" class="form-control" />
                        <span asp-validation-for="@Model.Date" class="text-danger"></span>
                    </td>
                </tr>
            </table>

            <button type="submit" class="btn btn-primary">Guardar</button>
        </form>
    }
</div>
